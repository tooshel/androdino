<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<link rel="shortcut icon" href="favicon.ico" />
		<title>Using the ADK (Accessory Development Kit) and Arduino to do awesome things</title>

		<meta name="description" content="A (short) introduction to Arduino and the Accessory Development Kit (ADK). The ADK hardware is great but it's rare and expensive and it's not necessary to get started in the world of microcontrollers.  I'll show the ADK hardware as well as regular Arduino hardware. Then a little about electronics. More about Arduino and "sheilds". Then a demonstration of a little project to take advantage of all this microcontroller knowlege and lastly the Android app and how it came together.">
		<meta name="author" content="Sheldon McGee">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/androdino.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

				<section>
					<h2>Arduino, Android and Lego</h2>
					<h3>Using Arduino (and an Android app)<br>to control Lego motors</h3>
					<p>aka: <a href="https://github.com/tooshel/androdino">androdino</a></p>


					<aside class="notes">
						<p>Hello? Aparently I say "um" alot . . . that sucks for you?</p>
						<p>Ready for show and tell?</p>
					</aside>
				</section>
				
				<section id="who">
					<section>
						<h1>Who is this?</h1>
						<h3>Cause I had to</h3>

						<ul>
						<li>Web Developer since before there was Google
						<li>Barely got an Electrical Engineering degree
						<li>Google I/O is sorta my thing (love conferences!)
						</ul>

						<aside class="notes">
							<p>Baby right down there!</p>
						</aside>
					</section>
					<section>
						<img src="images/baby.jpg">
					</section>

				</section>

				<section>
					<h1>The project!</h1>
					<p>Make a remote control Lego car. Add motors, gears, etc, to a this Lego set and connect it to an Arudino card outfitted with bluetooth and control it with an app on an Android Phone.</p>
					<img width="500" src="images/8041-600px.jpg">
				</section>


				<section>
					<h1>Why Lego?</h1>
						<ul>
							<li>Lego Technic makes it easy to prototype ideas</li>
							<li>Lego Motors are already geared down and powerful</li>
							<li>Lego Gears all work with each other</li>
							<li>Wanted to use this cool steering idea from Sariel</li>
							<li>Lego is fun! Age isn't a factor!</li>
							<li>A reason to buy more Lego</li>
						</ul>


					<aside class="notes">
						<p>Look at all these Lego sets I bought! Mostly just for this project!</p>
						<p></p>
						<p></p>
					</aside>
				</section>


				<section>
					<h1>Why Arduino?</h1>
						<ul>
							<li>Wanted a reason to explore microcontrollers</li>
							<li>Committed to give a presentation about Arduino and Android</li>
							<li>Arduino is inexpensive compared to a Mindstorms set</li>
							<li>Mindstorms "brain" is very limited (wireless and programming options)</li>
						</ul>

					<aside class="notes">
						<p>Look at all these Lego sets I bought! Mostly just for this project!</p>
						<p></p>
						<p></p>
					</aside>
				</section>

				<section>
					<h1>Why Android?</h1>
						<ul>
							<li>Lego remotes don't give control over speed (mostly . . . just ignore that train remote)</li>
							<li>Lego remotes are IR (light based) so you have to point the remote at the car</li>
							<li>Lego remotes perform poorly outside (the Sun's IR interfers)
							<li>Did I mention that commitment about giving a talk about Google stuff?</li>
						</ul>

				</section>


				<section id="arduino">
					<section>
						<h1>What is Arduino?</h1>
						 
						<blockquote cite="http://www.arduino.cc/">Arduino is an open-source electronics prototyping platform based on flexible, easy-to-use hardware and software. It's intended for artists, designers, hobbyists, and anyone interested in creating interactive objects or environments.</blockquote>

						<aside class="notes">
							<p>I figure you can read . . . but the quote here isn't too useful.</p>
							<p>It's OPEN . . . open source hardware</p>
							<p>It's more complicated of course but at least it says "platform".</p>
							<p>Name of a company, name of the boards they make, name of the software.</p>
						</aside>
					</section>

				</section>

				<!--

				<section id="adk">
					<section>
					<h1>What is ADK?</h1>

					<blockquote cite="http://developer.android.com/tools/adk/index.html">The Accessory Development Kit (ADK) is a reference implementation for hardware manufacturers and hobbyists to use as a starting point for building accessories for Android.</blockquote>

					 
					<aside class="notes">
						<p>Official ADK hardware and other ADK compatable hardware examples later on</p>
						<p>I think of it as the software that exists on Android phones so that it can communicate with hardware</p>
						<p>And, also, it's hardware as we'll see later.</p>
						<p>USB Host mode is what makes an Arduino an ADK board</p>
					</aside>
					</section>

				</section>

				-->

				<!--
				<section id="awesome" data-state="lego">
					<section>
						<h1>What is awesome?</h1>

						 <img class="fragment" src="images/volocopter-multi-blade-chopper_1.jpg" />

						<aside class="notes">
							<p>Awesome is the most hard to define.
							<p>For some it's gotta be something with propellers.</p>
						</aside>

					</section>

					<section>
						<h1>What is awesome?</h1>
						 <img class="fragment big" src="images/9398-1.jpg" />
					</section>

					<section>
						<h1>What is awesome?</h1>
						 <img class="big" src="images/9398-1-x-crappyremote.jpg" />
					</section>

					<section>
						<h1>What is awesome?</h1>
						<img class="big" src="images/9398-1-add-android.jpg" />

						<aside class="notes">
							<p>This is lego's solution to control (show the remotes)</p>
						</aside>
					</section>

				</section>
				-->

				<section id="demo">
					<h1>Demo "punch it"</h1>
					<img src="images/8041-600px.jpg">

					<aside class="notes">
						<p>Best just to see it for yourself</p>
					</aside>
				</section>

				<section id="more-on-arduino">

					<section>
						<h1>More on Arduino</h1>
						<h2>Official Arduino</h2>
						<p>ATmega328, 16Mhz</p>
						<img width="350" src="images/acc/ArduinoUno_R3_Front_450px.jpg">
						<img width="350" src="images/acc/ArduinoUno_R3_Back_450px.jpg">

						<aside class="notes">
							<p>Sometimes when you are making slides you feel like you need MORE</p>
							<p>Show and tell on this later.</p>
							<p>It's all about this one chip . . . the atmega. You can make your own Arduino with a breadboard, that chip, and some other little parts. Better yet, you can design your own board any size you want with whatever components you want built in.</p>
						</aside>

					</section>

					<section>
						<h3>Arduino MEGA</h3>
						<p>ATmega2560, 16Mhz (more pins, basically)</p>
						<img class="ard-width" src="images/acc/ArduinoMega2560_R3_Front_450px.jpg">
						<img class="ard-width" src="images/acc/ArduinoMega2560_R3_Back_450px.jpg">
						<br style="clear: both;" >
						<h3>Arduino MEGA ADK</h3>
						<img class="ard-width" src="images/acc/ArduinoADK_R3_Front_450px.jpg">
						<img class="ard-width" src="images/acc/ArduinoADK_R3_Back_450px.jpg">
					</section>

					<section>
						<h1>Arduino Due</h1>
						<p>ARM Cortex M3, 32-bit</p>
						<img class="ard-width" src="images/acc/ArduinoDue_Front_450px.jpg">
						<img class="ard-width" src="images/acc/ArduinoDue_Back_450px.jpg">
						<br style="clear: both;" >
					</section>

					<section>
						<h1>ADK 2011</h1>
						<p>Basically, it's an Arduino MEGA ADK (ATmega2560, 16Mhz)</p>
						<img class="ard-height" src="images/adk2011.jpg">
						<img class="ard-height" src="images/adk2011_w.jpg">
						<br style="clear: both;" >

					</section>

					<section>
						<h1>ADK 2012</h1>
						<p>Basically, it's an Arduino Due (ARM Cortex M3, 32-bit)</p>
						<p>With a TON of sensors and LEDs</p>
						<img class="ard-height" src="images/adk2012-board.jpg">
						<img class="ard-height" src="images/adk2012_blue.png">

					</section>

					<section>
						<h1>The Clones!</h1>
						<p>Plus dozens of others (ruggedunio and iteaduino)!</p>
						<img class="ard-height" src="images/ruggeduino_AM010_01.gif">
						<img class="ard-height" src="images/iteaduino.jpg">
					</section>

					<section>
						<h2>Shields n' Stuff!</h2>
						<p>Here are a few I have here</p>
						<img class="ard-height-small" src="images/iteadbt.jpg">
						<img class="ard-height-small" src="images/iteadmotomama.jpg">
						<img class="ard-height-small" src="images/iteadbtbee.jpg">
						<br style="clear: both;">
						<img class="ard-height-small" src="images/bricktronics.jpg">
						<img class="ard-height-small" src="images/acc/motorshield.jpg">
						<p class="fragment">Wanna see them? (maybe after the demo, which is next)</p>
					</section>
				</section>


				<section id="details-hardware">
					<h1>Arduino Hardware details</h1>
					<ul>
						<li>Arduino Mega (or Uno)</li>
						<li>iTead "Motomama" Shield with BTBee module</li>
					</ul>
					<br>
					<br>
			 
					<aside class="notes">
						<p>Shields can be replace with smaller parts and even custom boards</p>
					</aside>

				</section>

				<section id="details-hardware">
					<h1>Lego details</h1>

					<h2>Notice</h2>
					<ul>
						<li>my custom Lego PF to Arduino wires</li>
						<li>cool Lego seering mechanism</li>
						<li>TWO 9V battery compartments (one only delivers 3V)</li>
					</ul>
					 
					<aside class="notes">
						<p>Shields can be replace with smaller parts that are just wired up</p>
					</aside>

				</section>


				<section id="details-software-arduino">
					<section>
						<h2 class="upper">Hardware Software Details</h2>
						<img height="600" src="images/arduino-ide.png">

					</section>

					<section id="details-software-arduino">
						<h2 class="upper">Hardware Software Details</h2>

					<pre><code contenteditable>#include string.h

#define right1 5		//define I1 interface
#define speedPinRight 6  	//enable right motor (bridge A)
#define right2 7      		//define I2 interface 

#define left1 8      		//define I3 interface 
#define speedPinLeft 9  	//enable motor B
#define left2 10     		//define I4 interface 

//Motor Pins
int dir1B = right1;
int speedB = speedPinRight;
int dir2B = right2;

int dir1A = left1;
int speedA = speedPinLeft; 
int dir2A = left2;


//Bluetooth Pins
const int rxPin = 0; // pin used to receive, though, on the itead card, PIN 0 is TX
const int txPin = 1; // pin used to send to, though, on the itead card, PIN 1 is RX

//Other Bluetooth related globals
int availBytes;
const int stringSize = 64;
char stringarr[stringSize];

//Used for the ledPin test
const int ledPin = 2;
char sval; 
char bval;

//Other Globals . . . love GLOBALS
int loopDelay = 50;

const float speedFactor = 28.3;
String CTRLStr = '\0';
int frBool = 0;
int speedVal = 0;
int lrBool = 0;
int dirVal = 0;
int headBool = 0;
int brakeLeftBool = 0;
int brakeRightBool = 0;

//This is a valid string
//API: s:foward/reverse:speed:left/right:direction:headlights:brakeleft:brakeright
//ex   s:1:5:1:5:0:0:0

int apiStringSize = 15;
char apiStartChar = 's';

//needed for splitString
const int MAX_ARGS = 9;
char byteRead;

void setup()
{
  //Serial is used for bluetooth
  Serial.begin(9600);

  //Testing Pin
  pinMode(ledPin, OUTPUT);
  
  //Motor Pins  
  pinMode (dir1A, OUTPUT);
  pinMode (dir2A, OUTPUT);
  pinMode (dir1B, OUTPUT);
  pinMode (dir2B, OUTPUT);
  pinMode (speedA, OUTPUT);
  pinMode (speedB, OUTPUT);
  
}

void loop()
{
  //Blank out the string array that will hold the data from Bluetooth
  for(int i=0; i<stringSize; i++)
  {
    stringarr[i] = '\0';
  }
  
  availBytes = Serial.available();
  //Only read in the string when it has all the commands in the queue
  if(availBytes >= apiStringSize) { 
    //Every Serial.print/println/write is just a debug message sent to Bluetooth device
    Serial.print("Bluetooth Serial Available: ");
    Serial.println(availBytes);
    
    //Read in everything . . . we only need the first apiStringSize but we want to 
    //clear the buffer of everything else, one char at a time
    for(int i=0; i<availBytes; i++)
    {
      stringarr[i] = Serial.read();
    }
    
    Serial.println(stringarr);
    
    //splitString is defined below . . . I borrowed it from SO
    CTRLStr=splitString(stringarr,':',0);
        
    //Check to see if the control string is set to s . . . IT WORKS   
    if(CTRLStr[0] == 's') {
      //Grab all the vars we need that came in from bluetooth that ".toInt()" trick isn't mentioned 
      //in the String docs (there when 3 hours) . . . not use to all this type safety
      frBool = splitString(stringarr,':',1).toInt();
      speedVal = splitString(stringarr,':',2).toInt();
      lrBool = splitString(stringarr,':',3).toInt();
      dirVal = splitString(stringarr,':',4).toInt();
      headBool = splitString(stringarr,':',5).toInt();
      brakeLeftBool = splitString(stringarr,':',6).toInt();
      brakeRightBool = splitString(stringarr,':',7).toInt();
    }
    CTRLStr = '\0';
  }
  
  //Chances are nothing changes but I'll set the speed/direction of all the motors every loop
  if (frBool == 1) {
    digitalWrite (dir1A, 1);
    digitalWrite (dir2A, 0);
  } else {
    digitalWrite (dir1A, 0);
    digitalWrite (dir2A, 1);
  }
  
  if (lrBool == 1) {
    digitalWrite (dir1B, 1);
    digitalWrite (dir2B, 0);
  } else {
    digitalWrite (dir1B, 0);
    digitalWrite (dir2B, 1);
  }
  
  analogWrite (speedA, (int)(speedVal*speedFactor));
  analogWrite (speedB, (int)(dirVal*speedFactor));
  digitalWrite(ledPin, headBool);   
  
  //Everything works better if you give it a break between loops
  delay(loopDelay);   
}

String splitString(String s, char parser,int index) {
  String rs='\0';
  int parserCnt=0;
  int rFromIndex=0, rToIndex=-1;

  while(index>=parserCnt){
    rFromIndex = rToIndex+1;
    rToIndex = s.indexOf(parser,rFromIndex);

    if(index == parserCnt){
      if(rToIndex == 0 || rToIndex == -1){
        return '\0';
      }
      return s.substring(rFromIndex,rToIndex);
    }
    else{
      parserCnt++;
    }

  }
  return rs;
}
</code></pre>
<p>Had to show <b>something</b> at a CODE camp.</p>
					</section>
				</section>

				<section id="details-software-android">
	
					<section>
						<h1>Android Details</h1>
						<img height="500" class="fragment" src="images/mockup-n.jpg" />
					</section>

					<section id="psy">
						<style type="text/css">
						#watch-dancing-psy {
							background: url('images/psy_youtube.gif') no-repeat -74px 1px;
							background-color: white;
							width: 18px;
							height: 30px;
							border:0px solid red;
						}
						</style>

						<h2>Psy</h2>

						<img id="watch-dancing-psy" src="images/1px.gif">
					</section>

				</section>
	
				<section id="details-software-more-android">
					<section>
						<h1>Android Details</h1>
					</section>
					<section>
						<h1>Android Details</h1>
					</section>
				</section>

				<section id="challenges">
					<h1>Challenges</h1>

					<ul>
						<li>RX to TX and TX to RX??</li>
						<li>Can't program when the bluetooth is connected and using UART pins</li>
						<li>Software Serial on Mega/ADK</li>
						<li>SoftwareSerial library (or any other normal library) not in ADK 2012 custom IDE</li>
						<li>Lego batter pack is 9V. L298d chip on motor shield is inefficient</li>
					</ul>

					<aside class="notes">
						<p>For ADK 1, since it's basically a <a href="http://arduino.cc/en/Reference/SoftwareSerial">Mega</a>, you can't software serial on the usual pins. </p>
						<p>Since I'm using the UART pins 0 and 1 for bluetooth, I have to disconnect the bluetooth whenever I want to program the arduino</p>
						<p>(might be able to get it from the other Cortex M3 Arduino Clones)</p>
						<p>The battery from Lego is 9V but because of the L298 there is a 3V drop by the time it gets to the motors. So I had to invent a solution.</p>
					</aside>

				</section>
				<section id="demo-shieldbot">
					<h1>Demo Shieldbot</h1>
					<h2>Hardware</h2>
					<ul>
						<li>Arduino Uno</li>
						<li>Shieldbot (motor shield with motors attached!)</li>
						<li>Bluetooth Shield</li>
					</ul>

					<h2>Software</h2>
					<ul>
						<li>Tank Mode button</li>
					</ul>


					<aside class="notes">
						<p></p>
					</aside>
				</section>
				<!--
				<section id="demo-crawler">
					<h1>Demo</h1>
					<p>Crawler (which means slow, aparently)</p>
					<h2>Hardware details</h2>
					<ul>
						<li>ADK 2011</li>
						<li>Official Motor Shield</li>
						<li>Bluetooth Shield (not necessary)</li>
					</ul>

					<aside class="notes">
						<p>In the world of Lego there are competitions to get a "crawler" to make it through an obstacle course</p>
					</aside>
				</section>
				-->

				<section id="future">
					<h1>What's next?</h1>
					<h1>What else?</h1>
					<p class="fragment">Use that extra usb port!</p>
					<p class="fragment">Put a phone in as the windshield</p>
					<h2 class="fragment"><marquee>LIGHTS!</marquee></h2>

					<aside class="notes">
						<p>Use that pluggy thing to connect to another phone</p>
					</aside>

				</section>

				<section id="why-didnt-you-use">
					<h1>Other options?</h1>
					<h2>i.e. Why didn't you use?</h2>

					<ul>
						<li><a href="http://www.raspberrypi.org/">Raspberry Pi</a></li>
						<li><a href="http://electricimp.com/">Electric Imp</a></li>
					</ul>

					<aside class="notes">
						<p>I have them . . . would have tried but this presentation took too long.</p>
					</aside>

				</section>

				<section id="where-is-js">
					<h1>Why not Javascript?</h1>
					<h2>i.e. Why didn't you use?</h2>

					<aside class="notes">
						<p>I didn't want a computer between the phone and Arduino</p>
						<p>ADK 2012 and Due are powerful enough to use for something other than serial controlers</p>						
					</aside>

				</section>

				<section id="resources">
					<section>
						<h1>Resources</h1>
						<p>Books!!</p>
						<p>Honorable mention to <a href="http://electronics.stackexchange.com/">electronics</a> and <a href="http://bricks.stackexchange.com/">lego</a> stackexchanges</li>
						</ul>
						<br style="clear: both;" >
						<img class="book" src="images/books/arduino-in-action.jpg">
						<img class="book" src="images/books/unofficial_lego_builders_guide.png">
						<img class="book" src="images/books/lego_book_cover_300w.jpg">
						<img class="book" src="images/books/getting-started.jpg">
						<img class="book" src="images/books/arduino-cookbook.jpg">
						<p class="fragment">Want to laugh? Check out my <a href="http://bricks.stackexchange.com/questions/1917/is-the-pwm-on-the-pf-servo-motor-different-than-the-pwm-from-an-arduino">panic post</a> from this morning.</p>
						
						<aside class="notes">
							<p></p>
						</aside>
					</section>
					<section>
						<h1>Where did you get all that stuff?</h1>
						<h2>Vendors</h2>
						Amazon<br>
						<a href="http://www.makershed.com/">Maker Shed</a><br>
						<a href="http://www.sparkfun.com/">Sparkfun</a><br>
						<a href="http://www.adafruit.com/">Adafruit</a><br>
						<a href="http://blog.iteadstudio.com/">itead</a><br>
						<a href="http://www.seeedstudio.com/depot/">seeed</a><br>
						<a href="http://shop.lego.com/en-US/TECHNIC-ByTheme">Lego Technic</a> and <a href="http://shop.lego.com/en-US/Power-Functions-ByCategory">Power Functions</a><br>

						<aside class="notes">
						</aside>
					</section>

					<section>
						<h1>How much was it?</h1>

						<aside class="notes">
							<p>You don't want to know! Can be inexpensive if you do your homework or ask me or go to Heatsync.</p>
						</aside>
					</section>
					<section>
						<h2>Where is the code??</h2>

						<h1 class="fragment">Github!</h1>
						<p class="fragment"><a href="https://github.com/tooshel/androdino">androdino</a></p>

						<aside class="notes">
						</aside>
					</section>
				</section>


				<section>
					<h3>Insert the french word for "end" here</h3>
					<h5>@tooshel</h5>
					<h1>Questions?</h1>
				</section>

			</div>
		</div>
		<div class="footer_logo"><img src="images/2shel.png"> @tooshel</div>


		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>


	</body>
</html>
